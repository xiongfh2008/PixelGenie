# ğŸš¨ é¡¹ç›®æ— æ³•è®¿é—® - ä¿®å¤æŒ‡å—

## é—®é¢˜è¯Šæ–­

æ‚¨é‡åˆ°çš„é—®é¢˜æ˜¯ï¼š**é¡¹ç›®æœåŠ¡å™¨æ— æ³•å¯åŠ¨æˆ–ç«‹å³é€€å‡º**

è¿™å¯èƒ½æ˜¯ç”±äºä»¥ä¸‹åŸå› ï¼š
1. âœ… ç»ˆç«¯ç¯å¢ƒé—®é¢˜ï¼ˆPowerShell è¾“å‡ºè¢«æŠ‘åˆ¶ï¼‰
2. âœ… åå°è¿›ç¨‹æ— æ³•æ­£å¸¸è¿è¡Œ
3. âœ… Node.js æ¨¡å—å¯¼å…¥é—®é¢˜

---

## âœ… è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬

### æ–¹æ³•ä¸€ï¼šåŒå‡»å¯åŠ¨è„šæœ¬ï¼ˆæœ€ç®€å•ï¼‰

1. **æ‰¾åˆ°é¡¹ç›®æ ¹ç›®å½•çš„ `å¯åŠ¨é¡¹ç›®.bat` æ–‡ä»¶**
2. **åŒå‡»è¿è¡Œ**
3. **ç­‰å¾…ä¸¤ä¸ªæ–°çª—å£æ‰“å¼€**ï¼š
   - çª—å£ 1ï¼šåç«¯æœåŠ¡å™¨ï¼ˆç«¯å£ 3001ï¼‰
   - çª—å£ 2ï¼šå‰ç«¯æœåŠ¡å™¨ï¼ˆç«¯å£ 5173ï¼‰
4. **è®¿é—®** http://localhost:5173

---

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨åˆ†æ­¥å¯åŠ¨

#### æ­¥éª¤ 1ï¼šå¯åŠ¨åç«¯æœåŠ¡å™¨

**æ‰“å¼€ç¬¬ä¸€ä¸ªå‘½ä»¤æç¤ºç¬¦ï¼ˆCMDï¼‰**ï¼š
```cmd
cd /d D:\AIProject\PixelGenie\server
node index.js
```

**é¢„æœŸè¾“å‡º**ï¼š
```
ğŸš€ Server running on http://localhost:3001
ğŸ“¡ API Health Check: http://localhost:3001/api/health
ğŸ¨ Frontend should connect to: http://localhost:3001
âœ… Available API providers: google, cloudflare, xunfei, ...
ğŸ”‘ Active provider: google
```

å¦‚æœçœ‹åˆ°è¿™äº›è¾“å‡ºï¼Œè¯´æ˜åç«¯å¯åŠ¨æˆåŠŸï¼

#### æ­¥éª¤ 2ï¼šå¯åŠ¨å‰ç«¯æœåŠ¡å™¨

**æ‰“å¼€ç¬¬äºŒä¸ªå‘½ä»¤æç¤ºç¬¦ï¼ˆCMDï¼‰**ï¼š
```cmd
cd /d D:\AIProject\PixelGenie
npm run dev
```

**é¢„æœŸè¾“å‡º**ï¼š
```
VITE v5.x.x  ready in xxx ms

âœ  Local:   http://localhost:5173/
âœ  Network: use --host to expose
```

å¦‚æœçœ‹åˆ°è¿™äº›è¾“å‡ºï¼Œè¯´æ˜å‰ç«¯å¯åŠ¨æˆåŠŸï¼

#### æ­¥éª¤ 3ï¼šè®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®ï¼š**http://localhost:5173**

---

### æ–¹æ³•ä¸‰ï¼šä½¿ç”¨ PowerShellï¼ˆå¦‚æœ CMD ä¸å¯ç”¨ï¼‰

**æ‰“å¼€ä¸¤ä¸ª PowerShell çª—å£**ï¼š

**PowerShell 1ï¼ˆåç«¯ï¼‰**ï¼š
```powershell
cd D:\AIProject\PixelGenie\server
node index.js
```

**PowerShell 2ï¼ˆå‰ç«¯ï¼‰**ï¼š
```powershell
cd D:\AIProject\PixelGenie
npm run dev
```

---

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜ 1ï¼šåç«¯å¯åŠ¨åç«‹å³é€€å‡ºï¼Œæ²¡æœ‰ä»»ä½•è¾“å‡º

**å¯èƒ½åŸå› **ï¼š
- âœ… ä»£ç ä¸­æœ‰è¯­æ³•é”™è¯¯æˆ–å¯¼å…¥é”™è¯¯
- âœ… `.env` æ–‡ä»¶é…ç½®é—®é¢˜
- âœ… `import.meta.url` æ¡ä»¶åˆ¤æ–­é—®é¢˜

**è§£å†³æ–¹æ³•**ï¼š

1. **æµ‹è¯•ç®€å•æœåŠ¡å™¨**ï¼š
```cmd
cd /d D:\AIProject\PixelGenie\server
node simple-test.js
```

å¦‚æœ `simple-test.js` èƒ½å¯åŠ¨ï¼Œè¯´æ˜ Express æœ¬èº«æ²¡é—®é¢˜ï¼Œæ˜¯ `index.js` çš„ä»£ç é—®é¢˜ã€‚

2. **æ£€æŸ¥ Node.js ç‰ˆæœ¬**ï¼š
```cmd
node --version
```

ç¡®ä¿ç‰ˆæœ¬ >= 18.0.0

3. **é‡æ–°å®‰è£…ä¾èµ–**ï¼š
```cmd
cd /d D:\AIProject\PixelGenie
rmdir /s /q node_modules
del package-lock.json
npm install
```

---

### é—®é¢˜ 2ï¼šç«¯å£è¢«å ç”¨

**é”™è¯¯ä¿¡æ¯**ï¼š
```
Error: listen EADDRINUSE: address already in use :::3001
```

**è§£å†³æ–¹æ³•**ï¼š

1. **æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹**ï¼š
```cmd
netstat -ano | findstr :3001
```

2. **ç»“æŸè¿›ç¨‹**ï¼ˆæ›¿æ¢ `<PID>` ä¸ºå®é™…è¿›ç¨‹ IDï¼‰ï¼š
```cmd
taskkill /PID <PID> /F
```

3. **æˆ–è€…æ›´æ”¹ç«¯å£**ï¼š

ç¼–è¾‘ `server/.env`ï¼š
```
PORT=3002
```

åŒæ—¶æ›´æ–° `vite.config.js` ä¸­çš„ proxy é…ç½®ã€‚

---

### é—®é¢˜ 3ï¼šå‰ç«¯æ— æ³•è¿æ¥åç«¯

**ç—‡çŠ¶**ï¼š
- å‰ç«¯é¡µé¢åŠ è½½æ­£å¸¸
- ä½†åŠŸèƒ½æŠ¥é”™ï¼š"Network connection failed" æˆ– "HTTP 401"

**è§£å†³æ–¹æ³•**ï¼š

1. **ç¡®è®¤åç«¯æ­£åœ¨è¿è¡Œ**ï¼š
   è®¿é—® http://localhost:3001/api/health
   
   åº”è¯¥çœ‹åˆ° JSON å“åº”ï¼š
   ```json
   {
     "status": "healthy",
     "timestamp": "...",
     "apis": { ... }
   }
   ```

2. **æ£€æŸ¥ Vite ä»£ç†é…ç½®**ï¼š

æ‰“å¼€ `vite.config.js`ï¼Œç¡®è®¤ï¼š
```javascript
export default defineConfig({
  server: {
    proxy: {
      '/api': {
        target: 'http://localhost:3001',
        changeOrigin: true
      }
    }
  }
})
```

3. **æ£€æŸ¥é˜²ç«å¢™**ï¼š
   ç¡®ä¿é˜²ç«å¢™æ²¡æœ‰é˜»æ­¢ 3001 å’Œ 5173 ç«¯å£

---

### é—®é¢˜ 4ï¼šç¯å¢ƒå˜é‡æœªåŠ è½½

**ç—‡çŠ¶**ï¼š
- åç«¯å¯åŠ¨æˆåŠŸ
- ä½†åŠŸèƒ½æŠ¥é”™ï¼š"API key not found" æˆ– "HTTP 401"

**è§£å†³æ–¹æ³•**ï¼š

1. **ç¡®è®¤ `.env` æ–‡ä»¶å­˜åœ¨**ï¼š
```cmd
cd /d D:\AIProject\PixelGenie\server
dir .env
```

2. **æ£€æŸ¥ `.env` æ–‡ä»¶å†…å®¹**ï¼š
```
GOOGLE_API_KEY=æ‚¨çš„å¯†é’¥
CLOUDFLARE_ACCOUNT_ID=æ‚¨çš„è´¦å·ID
CLOUDFLARE_API_TOKEN=æ‚¨çš„ä»¤ç‰Œ
HUGGINGFACE_API_KEY=æ‚¨çš„å¯†é’¥
XUNFEI_APP_ID=æ‚¨çš„APPID
XUNFEI_API_SECRET=æ‚¨çš„å¯†é’¥
XUNFEI_API_KEY=æ‚¨çš„å¯†é’¥
```

3. **é‡å¯æœåŠ¡å™¨**ä»¥åŠ è½½æ–°çš„ç¯å¢ƒå˜é‡

---

## ğŸ“‹ å¯åŠ¨æ£€æŸ¥æ¸…å•

### å¯åŠ¨å‰æ£€æŸ¥

- [ ] Node.js å·²å®‰è£…ï¼ˆv18+ï¼‰
- [ ] ä¾èµ–å·²å®‰è£…ï¼ˆ`npm install`ï¼‰
- [ ] `.env` æ–‡ä»¶å·²é…ç½®ï¼ˆ`server/.env`ï¼‰
- [ ] ç«¯å£ 3001 å’Œ 5173 æœªè¢«å ç”¨

### å¯åŠ¨åéªŒè¯

- [ ] åç«¯çª—å£æ˜¾ç¤º "Server running on http://localhost:3001"
- [ ] å‰ç«¯çª—å£æ˜¾ç¤º "Local: http://localhost:5173/"
- [ ] è®¿é—® http://localhost:3001/api/health è¿”å› JSON
- [ ] è®¿é—® http://localhost:5173 æ˜¾ç¤ºç•Œé¢
- [ ] ä¸Šä¼ å›¾ç‰‡åŠŸèƒ½æ­£å¸¸

---

## ğŸ¯ å¿«é€Ÿå‘½ä»¤å‚è€ƒ

### å¯åŠ¨å‘½ä»¤

```bash
# åç«¯ï¼ˆCMD çª—å£ 1ï¼‰
cd /d D:\AIProject\PixelGenie\server
node index.js

# å‰ç«¯ï¼ˆCMD çª—å£ 2ï¼‰
cd /d D:\AIProject\PixelGenie
npm run dev
```

### æ£€æŸ¥å‘½ä»¤

```bash
# æ£€æŸ¥ Node.js ç‰ˆæœ¬
node --version

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -ano | findstr :3001
netstat -ano | findstr :5173

# æ£€æŸ¥åç«¯å¥åº·
curl http://localhost:3001/api/health

# æˆ–åœ¨æµè§ˆå™¨è®¿é—®
start http://localhost:3001/api/health
```

### ç»´æŠ¤å‘½ä»¤

```bash
# é‡æ–°å®‰è£…ä¾èµ–
cd /d D:\AIProject\PixelGenie
rmdir /s /q node_modules
del package-lock.json
npm install

# æ¸…ç†ç¼“å­˜
npm cache clean --force

# æ›´æ–°ä¾èµ–
npm update
```

---

## ğŸŒ è®¿é—®åœ°å€

| æœåŠ¡ | åœ°å€ | è¯´æ˜ |
|------|------|------|
| ğŸ¨ å‰ç«¯ç•Œé¢ | http://localhost:5173 | ä¸»ç•Œé¢ |
| ğŸ”§ åç«¯ API | http://localhost:3001 | API æœåŠ¡å™¨ |
| ğŸ’š å¥åº·æ£€æŸ¥ | http://localhost:3001/api/health | çŠ¶æ€æ£€æŸ¥ |
| ğŸŒ ç”Ÿäº§ç¯å¢ƒ | https://pixel-genie-iota.vercel.app | Vercel éƒ¨ç½² |

---

## ğŸ’¡ æ¨èå¯åŠ¨æ–¹å¼

### å¼€å‘è°ƒè¯•æ—¶

ä½¿ç”¨ **æ–¹æ³•äºŒï¼ˆæ‰‹åŠ¨åˆ†æ­¥å¯åŠ¨ï¼‰**ï¼Œè¿™æ ·å¯ä»¥ï¼š
- âœ… çœ‹åˆ°è¯¦ç»†çš„å¯åŠ¨æ—¥å¿—
- âœ… å®æ—¶æŸ¥çœ‹é”™è¯¯ä¿¡æ¯
- âœ… æ–¹ä¾¿è°ƒè¯•å’Œæ’æŸ¥é—®é¢˜

### æ—¥å¸¸ä½¿ç”¨æ—¶

ä½¿ç”¨ **æ–¹æ³•ä¸€ï¼ˆåŒå‡»å¯åŠ¨è„šæœ¬ï¼‰**ï¼Œè¿™æ ·å¯ä»¥ï¼š
- âœ… ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡
- âœ… è‡ªåŠ¨æ‰“å¼€ç‹¬ç«‹çª—å£
- âœ… æ–¹ä¾¿ç®¡ç†å’Œå…³é—­

---

## ğŸ†˜ ä»ç„¶æ— æ³•å¯åŠ¨ï¼Ÿ

å¦‚æœå°è¯•äº†æ‰€æœ‰æ–¹æ³•ä»ç„¶æ— æ³•å¯åŠ¨ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š

1. **Node.js ç‰ˆæœ¬**ï¼š
```cmd
node --version
npm --version
```

2. **å¯åŠ¨æ—¶çš„å®Œæ•´é”™è¯¯ä¿¡æ¯**ï¼ˆæˆªå›¾æˆ–å¤åˆ¶ï¼‰

3. **ç¯å¢ƒå˜é‡é…ç½®æƒ…å†µ**ï¼š
```cmd
cd /d D:\AIProject\PixelGenie\server
type .env
```
ï¼ˆæ³¨æ„ï¼šä¸è¦åˆ†äº«å®é™…çš„ API å¯†é’¥ï¼‰

4. **ç«¯å£å ç”¨æƒ…å†µ**ï¼š
```cmd
netstat -ano | findstr :3001
netstat -ano | findstr :5173
```

---

## âœ… æˆåŠŸå¯åŠ¨çš„æ ‡å¿—

å½“æ‚¨çœ‹åˆ°ä»¥ä¸‹å†…å®¹æ—¶ï¼Œè¯´æ˜å¯åŠ¨æˆåŠŸï¼š

### åç«¯çª—å£ï¼š
```
ğŸš€ Server running on http://localhost:3001
ğŸ“¡ API Health Check: http://localhost:3001/api/health
âœ… Available API providers: google, cloudflare, xunfei
ğŸ”‘ Active provider: google
```

### å‰ç«¯çª—å£ï¼š
```
VITE v5.x.x  ready in xxx ms
âœ  Local:   http://localhost:5173/
```

### æµè§ˆå™¨ï¼š
- è®¿é—® http://localhost:5173 çœ‹åˆ°ç•Œé¢
- å¯ä»¥ä¸Šä¼ å›¾ç‰‡
- åŠŸèƒ½æŒ‰é’®å¯ç‚¹å‡»

---

**ç°åœ¨è¯·åŒå‡» `å¯åŠ¨é¡¹ç›®.bat` æ–‡ä»¶å¼€å§‹ï¼** ğŸš€

